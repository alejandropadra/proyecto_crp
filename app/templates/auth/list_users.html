
{% extends 'layout.html' %}
{% from 'helpers/_forms.html' import render_field %}
{% block estilos %}
    <!-- Semantic UI CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.9.2/semantic.min.css">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.semanticui.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <!-- CSS Custom -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/list_users.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css', v=APP_VERSION) }}">

    
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/estilos_letras_cambio.css') }}">

    {% endblock%}
{% block container %}

<main>
    <input type="hidden" id="csrf" name="csrf_token" value="{{ csrf_token() }}"/>
    <div class="card-ui d-flex flex-column gap-2 " >
        <div class="header-tabla">
            <div class="tituloTabla">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users-icon lucide-users"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><path d="M16 3.128a4 4 0 0 1 0 7.744"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><circle cx="9" cy="7" r="4"/></svg></span>
                <h2>Administrar usuarios </h2>
            </div>


            {% if current_user.nivel == "corimon" or current_user.nivel=="administrador" %}
            <div class="contenedor-boton-add">
                <a id="activarModal" class="btn-add">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Agregar Usuario
                </a>
            </div>  
            {% endif %}
        </div>

        <div class="table-wrapper">

            <div id="loader-container" class="d-flex flex-column align-items-center justify-content-center" style="min-height: 300px;">
                <span class="loader"></span>
                <p class="mt-3 text-muted">Cargando Tabla de Usuarios...</p>
            </div>

            <div id="tabla-container" style="display: none;">
                <table id="tablaUsuarios" class="ui celled table" style="width:100%">
                    <thead>
                        <tr>
                            <th>RIF/Cedula</th>
                            <th>Usuario</th>
                            <th>Email</th>
                            <th>Zona</th>
                            <th>Nivel</th>
                            <th>Seller</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Se llena solo pa -->
                    </tbody>
                </table>
            </div>

        </div>

    </div>




    <div id="invoiceModalAddUsers" class="modal">
        <div class="modal-content" style="max-width: 48%;">
            <div class="invoice-header">
                <button class="close-btn-modal close-modal-add-users"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></button>
                <h3 class=" m-0">Agregar Usuarios</h3>
            </div>
            <div class="invoice-body">
                <form class="modern-form">
                    <div class="form-body d-flex flex-column gap-3">

                        <div class=" d-flex flex-column gap-2">
                            <div class=" fw-bold">
                                Rif del Usuario
                            </div>
                            <div class="row g-2">
                                <div class="col-2">
                                    <div class="input-wrapper">
                                        {{ render_field(form.rif, class="form-input select", id="letraRif") }}
                                    </div>
                                </div>

                                <div class="col">
                                    <div class="input-wrapper">
                                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
                                            <circle cx="12" cy="7" r="4"/>
                                        </svg>
                                        {{ render_field(form.n_rif, class="form-input", id="numeroRif", placeholder="Ingrese el numero de identidad") }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                            <div class=" fw-bold">
                                Nombre de Usuario
                            </div>
                            <div class="input-wrapper">
                                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-pen-icon lucide-user-pen"><path d="M11.5 15H7a4 4 0 0 0-4 4v2"/><path d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/><circle cx="10" cy="7" r="4"/></svg>
                                {{ render_field(form.username, class ="form-input", id="username", class="form-input", placeholder="Ingrese el nombre de usuario") }}
                            </div>
                        </div>
                        
                        <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                            <div class=" fw-bold">
                                Contrase침a
                            </div>
                            <div class="d-flex align-content-center gap-2">
                                <div class="input-wrapper position-relative">
                                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock-keyhole-icon lucide-lock-keyhole"><circle cx="12" cy="16" r="1"/><rect x="3" y="10" width="18" height="12" rx="2"/><path d="M7 10V7a5 5 0 0 1 10 0v3"/></svg>
                                    {{ render_field(form.password, class ="form-input", id="password", type="password", placeholder="Ingrese la contrase침a") }}
                                    
                                    <button type="button" class="btn-toggle-password" data-target="password">
                                        <svg class="eye-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/>
                                            <circle cx="12" cy="12" r="3"/>
                                        </svg>
                                        <svg class="eye-off-icon" style="display: none;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/>
                                            <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/>
                                            <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/>
                                            <line x1="2" x2="22" y1="2" y2="22"/>
                                        </svg>
                                    </button>
                                </div>

                                <div class="input-wrapper position-relative">
                                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-key-round-icon lucide-key-round"><path d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"/><circle cx="16.5" cy="7.5" r=".5" fill="currentColor"/></svg>
                                    {{ render_field(form.confirm_password, class ="form-input", id="confirmar", type="password", placeholder="Confirme la contrase침a") }}
                                    
                                    <button type="button" class="btn-toggle-password" data-target="confirmar">
                                        <svg class="eye-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/>
                                            <circle cx="12" cy="12" r="3"/>
                                        </svg>
                                        <svg class="eye-off-icon" style="display: none;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/>
                                            <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/>
                                            <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/>
                                            <line x1="2" x2="22" y1="2" y2="22"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                            <div class=" fw-bold">
                                Email del Usuario
                            </div>
                            <div class="input-wrapper">
                                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail-icon lucide-mail"><path d="m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"/><rect x="2" y="4" width="20" height="16" rx="2"/></svg>
                                {{ render_field(form.email, class ="form-input", id="email", class="form-input", placeholder="Ingrese el email del usuario") }}
                            </div>
                        </div>
                        
                        <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                            <div class=" fw-bold">
                                Codigo del Usuario
                            </div>
                            <div class="input-wrapper">
                                <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-code-icon lucide-square-code"><path d="m10 9-3 3 3 3"/><path d="m14 15 3-3-3-3"/><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                                {{ render_field(form.codigo, class ="form-input", id="codigo", class="form-input", placeholder="Ingrese el c칩digo del usuario") }}
                            </div>
                        </div>

                        <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                            <div class="d-flex align-content-center gap-2">
                                <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                                    <div class=" fw-bold">
                                        Nivel de Usuario 
                                    </div>
                                    <div class="input-wrapper">
                                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-cog-icon lucide-cog"><path d="M11 10.27 7 3.34"/><path d="m11 13.73-4 6.93"/><path d="M12 22v-2"/><path d="M12 2v2"/><path d="M14 12h8"/><path d="m17 20.66-1-1.73"/><path d="m17 3.34-1 1.73"/><path d="M2 12h2"/><path d="m20.66 17-1.73-1"/><path d="m20.66 7-1.73 1"/><path d="m3.34 17 1.73-1"/><path d="m3.34 7 1.73 1"/><circle cx="12" cy="12" r="2"/><circle cx="12" cy="12" r="8"/></svg>
                                        {{ render_field(form.nivel, class ="form-input", id="nivel" ) }}
                                    </div>
                                </div>

                                <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                                    <div class=" fw-bold">
                                        Zona del Usuario 
                                    </div>
                                    <div class="input-wrapper">
                                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin-icon lucide-map-pin"><path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/><circle cx="12" cy="10" r="3"/></svg>
                                        {{ render_field(form.zona, class ="form-input", id="zona" ) }}
                                    </div>
                                </div>

                                <div class=" d-flex flex-column align-content-center justify-content-between gap-2">
                                    <div class=" fw-bold">
                                        Vendedor Asignado
                                    </div>
                                    <div class="input-wrapper">
                                        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-briefcase-business-icon lucide-briefcase-business"><path d="M12 12h.01"/><path d="M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/><path d="M22 13a18.15 18.15 0 0 1-20 0"/><rect width="20" height="14" x="2" y="6" rx="2"/></svg>
                                        {{ render_field(form.vendedor, class ="form-input", id="vendedor", placeholder="Nombre del vendedor" ) }}
                                    </div>
                                </div>

                                
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer d-flex justify-content-end gap-2 mt-4">
                        <button type="button" class="btn btn-secondary close-modal-add-users">Cancelar</button>
                        <div class="contenedor-boton-add">
                            <button id="botonEnviarUsuarios" class="btn-add">
                                Agregar Usuario
                            </button>
                        </div>
                    </div>

                </form>

            </div>
        </div>
    </div>

            

<!-- 
<div class="container mt-4 table-responsive" style="box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); padding: 20px 20px 20px 20px; border-radius: 7px;">  
    <table id="example" class="display cell-border" style="width:100%">
        <thead>
            <tr>
                <th>RIF</th>
                <th>Usuario</th>
                <th>Correo Electronico</th>
                <th>Zona</th>
                <th>Nivel</th>
                <th>Codigo</th>
                <th>Detalles</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
           
            <tr class="celda text-center" onclick="location.href='{{ url_for('.usuario', rif=user.rif)}}'"; style="cursor:pointer;" data-toggle="tooltip" data-placement="top" title="Click para mas detalles">
                
                <td>{{user.rif}}</td>
                <td>{{user.username}}</td>
                <td>{{user.email}}</td>
                <td>{{user.zona }}</td>
                <td>{{user.nivel}}</td>
                <td>{{user.codigo}}</td>
                <td class="td-container">
                    <a href="{{ url_for('.usuario', rif=user.rif)}}" class="btn detalles" style="border:2px solid rgb(10, 10, 10);">
                        Detalles
                    </a>                   
                </td>
            </tr>
        
            {% endfor %}
        </tbody>

        <tfoot>
            <tr>
                <th>RIF</th>
                <th>Usuario</th>
                <th>Correo Electronico</th>
                <th>Zona</th>
                <th>Nivel</th>
                <th>Codigo</th>
                <th>Detalles</th>
            </tr>
        </tfoot>
    </table>
</div>
-->
</main>

{% endblock %}

{% block js%}
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fomantic-ui/2.9.2/semantic.min.js"></script>
    <script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/2.1.8/js/dataTables.semanticui.js"></script>

    <script src="{{ url_for('static', filename = 'js/list_users.js') }}"></script>

{% endblock %}